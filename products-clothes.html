<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>DveinMart - Fashion</title>
    <link rel="icon" href="./Images/Login/Round logo.png">
    <link rel="stylesheet" href="./Styles/products.css">
</head>

<body>
    <div class="top-header">
        <div class="header-left">
            <img src="./Images/Login/Login Logo.ico" alt=""><div class="header-title">DveinMart</div>
        </div>
        <div class="header-right">
            <button class="nav-btn" onclick="window.location='cart.html'">
                ðŸ›’ Cart
                <span id="cart-count" style="margin-left: 5px; background-color: var(--accent); color: #000; padding: 2px 7px; border-radius: 50%; font-weight: 600; font-size: 12px; display: none;">0</span>
            </button>
                <button class="nav-btn" onclick="window.location='index.html'">Login</button>
        </div>
    </div>

    <div class="nav-menu">
        <div class="nav-item" onclick="window.location='home.html'">Home</div>
        <div class="nav-item dropdown">Categories â–¾
            <div class="dropdown-menu">
                <div onclick="window.location='products-furniture.html'">Furniture</div>
                <div onclick="window.location='products-grocery.html'">Grocery</div>
                <div onclick="window.location='products-clothes.html'">Fashion</div>
                <div onclick="window.location='products-electronics.html'">Electronics</div>
            </div>
        </div>
        <div class="nav-item" onclick="window.location='home.html#about-section'">About</div>
        <div class="nav-item" onclick="window.location='home.html#support-section'">Support</div>
    </div>

    <h1 class="page-title">Fashion Collection</h1>

    <div class="sub-category-list">
        <div onclick="showCategory('Women')">Women Dresses</div>
        <div onclick="showCategory('Men')">Men Dresses</div>
        <div onclick="showCategory('Kids')">Kids</div>
        <div onclick="showCategory('Shoes')">Shoes</div>
        <div onclick="showCategory('Accessories')">Accessories</div>
    </div>

    <div id="product-container"></div>

    <script>
        // ðŸŽ¯ NEW FUNCTION: Updates the Cart Count in the Header (Functionality remains UNCHANGED)
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const countElement = document.getElementById('cart-count');

            if (countElement) {
                const totalCount = cart.reduce((total, item) => total + item.quantity, 0);

                if (totalCount > 0) {
                    countElement.textContent = totalCount;
                    countElement.style.display = 'inline';
                } else {
                    countElement.textContent = '0';
                    countElement.style.display = 'none';
                }
            }
        }
        
        // PATH CHANGES applied within data object literals below:
        const data = {
            Women: [1,2,3,4].map(i=>({name:`Women Dress ${i}`, price:999+i*50, img:`./Images/Products/Fashion/Women/women${i}.jpeg`})),
            Men: [1,2,3,4].map(i=>({name:`Men Dress ${i}`, price:799+i*40, img:`./Images/Products/Fashion/Men/men${i}.jpeg`})),
            Kids: [1,2,3,4].map(i=>({name:`Kids Item ${i}`, price:399+i*20, img:`./Images/Products/Fashion/Kids/kids${i}.jpeg`})),
            Shoes: [1,2,3,4].map(i=>({name:`Shoes ${i}`, price:1299+i*50, img:`./Images/Products/Fashion/Shoes/shoes${i}.jpeg`})),
            Accessories: [1,2,3,4].map(i=>({name:`Accessory ${i}`, price:199+i*30, img:`./Images/Products/Fashion/Accessories/acc${i}.jpeg`}))
        };

        function showCategory(cat){
            const list = data[cat] || [];
            let html = `<h2 class="sub-title">${cat}</h2><div class="product-grid">`;
            list.forEach(it=> html += `<div class="product-card"><img src="${it.img}" alt><h3>${it.name}</h3><p>â‚¹${it.price}</p><button onclick="addToCart('${escape(it.name)}',${it.price},'${it.img}')">+ Add</button></div>`);
            html += `</div>`;
            document.getElementById('product-container').innerHTML = html;
        }
        showCategory('Women');

        function addToCart(name, price, img){ 
            name=unescape(name); 
            let cart=JSON.parse(localStorage.getItem('cart'))||[]; 
            const idx=cart.findIndex(i=>i.name===name); 
            if(idx>=0) cart[idx].quantity+=1; 
            else cart.push({name,price,img,quantity:1}); 
            localStorage.setItem('cart',JSON.stringify(cart));
            
            // ðŸŽ¯ UPDATED: Call cart counter after adding item
            updateCartCount(); 
        }

        // SCROLL FUNCTIONS ARE NOT NEEDED HERE DUE TO HTML LINK FIX. Kept for original compatibility:
        function scrollToAbout(){ /* Logic updated in HTML to link to home.html#about-section */ }
        function scrollToSupport(){ /* Logic updated in HTML to link to home.html#support-section */ }

        // ðŸŽ¯ INITIAL CALL: Load cart count on page load
        updateCartCount();
    </script>
</body>
</html>